<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Large Clock with Seconds</title>  

  <!-- Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap"/>;
  <style>
    html, body {
      height: 100%;
    }
    body {
      background-color: #000;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #clock {
      font-size: 7rem;
      text-align: center;
      font-family: 'Audiowide', sans-serif;
      /* smooth color fade on minute change (optional) */
      transition: color 1000ms linear;
      /* prevent text selection highlight on clicks/taps */
      user-select: none;
    }
  </style>
</head>
<body>
  <div id="app"></div>

  <script type="module">
	"use strict";
	import ezWeb from "https://cdn.jsdelivr.net/gh/Akadine/ezWebJS@v0.1.7/ezWeb.js";
	
    const options = { verbosity: 2 };

    // ViewModel
    const model = {
      time: "--:--:-- --",
      color: "#00FFCC",
      timerId: null
    };

    ezWeb("app", "bind", model, options, function (system) {
      const $ = system.dom;
      const data = system.data;

      // View
      $(system.appEl).append("div", {
        ezBind: "time",
        style: "color: ``color``;",
        id: "clock"
      });

      // Helpers
      const pad = n => String(n).padStart(2, "0");
      const randomHexColor = () => "#" + Math.floor(Math.random() * 0xFFFFFF).toString(16).padStart(6, "0");
			  // Bright = high saturation and mid-to-high lightness
		const randomBrightHex = () => {
		  // Hue anywhere (0–360)
		  const h = Math.floor(Math.random() * 360);
		  // Keep colors punchy: saturation 80–100%
		  const s = 80 + Math.floor(Math.random() * 21);
		  // Keep them bright but not washed out: lightness 50–70%
		  const l = 50 + Math.floor(Math.random() * 21);

		  // Convert HSL to HEX
		  const hslToHex = (h, s, l) => {
			s /= 100; l /= 100;
			const k = n => (n + h / 30) % 12;
			const a = s * Math.min(l, 1 - l);
			const f = n => l - a * Math.max(-1, Math.min(k(n) - 3, Math.min(9 - k(n), 1)));
			const toHex = x => Math.round(x * 255).toString(16).padStart(2, "0");
			return `#${toHex(f(0))}${toHex(f(8))}${toHex(f(4))}`;
		  };

		  return hslToHex(h, s, l);
		};

      // Update function: compute from real time to avoid drift
      data.updateClock = function () {
        const now = new Date();

        // 12-hour format with AM/PM
        let h = now.getHours();
        const ampm = h >= 12 ? "PM" : "AM";
        h = h % 12 || 12; // 0 -> 12
        const hh = h;
        const mm = pad(now.getMinutes());
        const ss = pad(now.getSeconds());

        data.time = `${hh}:${mm}:${ss}`;

        // Change color every other second
		const sec = now.getSeconds();
        
		if ((sec % 3) === 0) {            // or: if ((sec & 1) === 0)
		  data.color = randomBrightHex();
		}

      };

      // Start aligned to the next second boundary
      function startClock() {
        data.updateClock(); // immediate render
        const msToNextSecond = 1000 - (Date.now() % 1000);
        data.timerId = setTimeout(function tick() {
          data.updateClock();
          data.timerId = setTimeout(tick, 1000);
        }, msToNextSecond);
      }

      // Safety: if this page re-inits for any reason, clear any old timer
      if (data.timerId) clearTimeout(data.timerId);

      startClock();
    });
  </script>
</body>
</html>